{% extends "base.html" %}

{% block head %}
<title>CharSyn - All Characters</title>
<style>
  .card {
    overflow: hidden
  }

  .card .card-content {
    text-shadow: 2px 2px 10px black;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.75), rgba(255, 255, 255, 0), rgba(0, 0, 0, 0.75));
  }

  .card .card-image {
    transition: scale 300ms
  }

  .card:hover .card-image {
    scale: 1.10;
  }
</style>
{% endblock %}

{% block body %}
<div class="section">
  <div class="block">
    <form id="global-search" class="form">
      <div class="field">
        <p class="control has-icons-left">
          <input name="name" type="text" class="input" placeholder="Character Name / Base ID Name">
          <span class="icon is-left">
            <i data-feather="search"></i>
          </span>
        </p>
      </div>
      <div class="field buttons has-addons">
        <div class="button is-static">
          <span class="icon">
            <i data-feather="filter"></i>
          </span>
        </div>
        <!-- The id will be the key name in the JS map, and the class "filter" helps identify the filters -->
        <div id="baseId" class="control dropdown is-hoverable filter">
          <div class="dropdown-trigger">
            <button type="button" class="button filter-button" aria-controls="base-character-filters">
              Base Ch.
            </button>
          </div>
          <div class="dropdown-menu" id="base-id-filters" role="menu">
            <div class="dropdown-content">
              {% for base in filters.base_ids %}
              <button id="base-{{base[0]}}" class="dropdown-item filter-button">{{base[1]}}</button>
              {% endfor %}
            </div>
          </div>
        </div>
        <div id="archetype" class="control dropdown is-hoverable filter">
          <div class="dropdown-trigger">
            <button type="button" class="button filter-button" aria-controls='archetype-filters'>
              Archetype
            </button>
          </div>
          <div class="dropdown-menu" id="archetype-filters">
            <div class="dropdown-content">
              {% for archetype in filters.archetypes %}
              <button id="type-{{archetype[0]}}" class="dropdown-item filter-button">{{archetype[1]}}</button>
              {% endfor %}
            </div>
          </div>
        </div>
        <div id="rarity" class="control dropdown is-hoverable filter">
          <div class="dropdown-trigger">
            <button type="button" class="button filter-button" aria-controls='rarity-filters'>
              Rarity
            </button>
          </div>
          <div class="dropdown-menu" id="rarity-filters">
            <div class="dropdown-content">
              {% for rarity in filters.rarities %}
              <button id="rarity-{{rarity}}" class="dropdown-item filter-button">{{rarity}}*</button>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="block">
    <div id="characters-container" class="columns is-multiline is-mobile is-1">
      <!-- Populated by JS -->
    </div>

  </div>
</div>
<script>
  var data = {{characters | tojson}}
</script>
<script type="module" src="{{ url_for('static', filename='allCharacters.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='filters.js') }}"></script>

{% endblock %}